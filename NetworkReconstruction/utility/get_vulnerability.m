function prob_sequence = get_vulnerability(G, alpha, sequence, psi)


A = adjacency(G);
[N, m] = size(A);
index_array = ones(1,N);
prob_sequence = zeros(1, length(sequence));
degree_array = degree(G);


norm_factor = norm_factor_calc(degree_array, alpha);
for t = 1:length(sequence)
    victim_id = psi(sequence(t));
    prob_sequence(1, t) = (degree_array(victim_id).^alpha)./norm_factor;
    index_array(victim_id) = 0;
    %norm_factor = norm_factor - degree_array(victim_id)^(alpha);
    degree_array(victim_id) = 0;
    for j = 1:N
        if A(victim_id, j) == 1
            A(victim_id, j) = 0;
            A(j, victim_id) = 0;
           %norm_factor = norm_factor - degree_array(j)^(alpha);
            degree_array(j) = degree_array(j) - 1;
           %norm_factor = norm_factor + degree_array(j)^(alpha);
        end
        
    end
    norm_factor = norm_factor_calc(degree_array, alpha);
    
end